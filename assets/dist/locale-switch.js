System.register(["@main"],(function(t,e){var n;function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}return{setters:[function(t){}],execute:function(){t("LocaleSwitchModal",n=function(){function t(e,n){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,"options",{type:"",table:"",routeName:"",currentId:"",defaultId:"",inputId:"",langField:"",titleField:"",triggerInputName:"lang_assoc"}),this.el=e,this.options=Object.assign({},this.options,n);var o=this.el.querySelectorAll("[data-task=create_lang_version]");u.each(o,(function(t){t.addEventListener("click",(function(e){i.saveCurrentAndCreateLang(t)}))})),o=this.el.querySelectorAll("[data-task=switch_lang]"),u.each(o,(function(t){t.addEventListener("click",(function(e){i.switchLang(t)}))}))}var e,n,o;return e=t,(n=[{key:"validateForm",value:function(){var t=document.querySelector("#"+this.options.inputId).form;if(!u.$validation.get(t).validateAll())throw alert(u.__("luna.field.locale.switch.message.form.invalid")),new Error("Form invalid");return t}},{key:"saveCurrentAndCreateLang",value:function(t){var e=this.validateForm();u.form(e).post(null,a({},this.options.triggerInputName,{task:"create",type:this.options.type,table:this.options.table,routeName:this.options.routeName,code:t.dataset.lang,copy:t.dataset.copy,langField:this.options.langField,titleField:this.options.titleField,currentId:this.options.currentId,defaultId:this.options.defaultId}))}},{key:"switchLang",value:function(t){var e=this.validateForm();u.form(e).post(null,a({},this.options.triggerInputName,{task:"switch",table:this.options.table,routeName:this.options.routeName,targetId:t.dataset.targetId}))}}])&&i(e.prototype,n),o&&i(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}()),u.directive("locale-switch-modal",{mounted:function(t,e){var i=e.value,a=JSON.parse(i);u.module(t,"locale.switch",(function(){return new n(t,a)}))}})}}}));
//# sourceMappingURL=locale-switch.js.map
